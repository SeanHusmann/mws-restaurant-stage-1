"use strict";var map,restaurant=void 0;registerServiceWorker=function(){navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js")},registerServiceWorker(),window.initMap=function(){self.map=new google.maps.Map(document.getElementsByClassName("map")[0],{zoom:16,center:restaurant.latlng,scrollwheel:!1}),self.restaurant&&DBHelper.mapMarkerForRestaurant(self.restaurant,self.map)},fetchRestaurantFromURL=function(e){if(self.restaurant)e(null,self.restaurant);else{var a=getParameterByName("id");a?DBHelper.fetchRestaurantById(a,function(a,t){self.restaurant=t,t?(fillRestaurantHTML(),e(null,t)):console.error(a)}):(error="No restaurant id in URL",e(error,null))}},fillRestaurantHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0];document.getElementsByClassName("restaurant-name")[0].innerHTML=e.name;document.getElementsByClassName("restaurant-address")[0].innerHTML=e.address;var a=document.getElementsByClassName("restaurant-img")[0];a.className="restaurant-img";var t=""+["180w","304w","428w","552w","676w","800w"].map(function(a){return"img/"+e.id+"-"+a+".jpg "+a}).join(", ");a.setAttribute("srcset",t),a.setAttribute("sizes","(max-width: 614px) calc(100vw - 2 * 36px), (max-width: 1189px) calc((100vw - 3 * 35px - 2 * 2px) / 2), (max-width: 1399px) calc((100vw - 4 * 35px - 3 * 2px) / 3), (min-width: 1400px) 409px"),a.src="img/"+e.id+"-552w.jpg",a.alt=e.name+" Restaurant";document.getElementsByClassName("restaurant-cuisine")[0].innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.operating_hours:arguments[0],a=document.getElementsByClassName("restaurant-hours")[0];for(var t in e){var r=document.createElement("tr"),n=document.createElement("th");n.innerHTML=t,r.appendChild(n);var l=document.createElement("td");l.innerHTML=e[t],r.appendChild(l),a.appendChild(r)}},fillReviewsHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.reviews:arguments[0],a=document.getElementsByClassName("reviews-container")[0],t=document.createElement("h3");if(t.innerHTML="Reviews",a.appendChild(t),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void a.appendChild(r)}var n=document.getElementsByClassName("reviews-list")[0];e.forEach(function(e){n.appendChild(createReviewHTML(e))}),a.appendChild(n)},createReviewHTML=function(e){var a=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,t.className="reviewer-name",a.appendChild(t);var r=document.createElement("p");r.innerHTML=e.date,r.className="review-date",a.appendChild(r);var n=document.createElement("p");n.innerHTML="Rating: "+e.rating,n.className="review-rating",a.appendChild(n);var l=document.createElement("p");return l.innerHTML=e.comments,l.className="review-text",a.appendChild(l),a},fillBreadcrumb=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0],a=document.querySelector(".breadcrumb ol"),t=document.createElement("li");t.innerHTML=e.name,t.setAttribute("aria-current","page"),a.appendChild(t)},getParameterByName=function(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},loadGoogleMapsPreviewImage=function(e){var a=document.querySelector(".map-overlay"),t=document.querySelector(".map"),r=document.querySelector(".map-preview"),n=document.querySelector(".map-container");a.onclick=function(){a.style.display="none",a.parentNode.removeChild(a),t.style.display="block",self.map&&google.maps.event.addDomListenerOnce(self.map,"tilesloaded",function(){r.parentNode.removeChild(r),t.style.position="relative"})};window.getComputedStyle(t);var l=Math.trunc(window.innerWidth),s=n.offsetHeight,i="&markers=size:%7Ccolor:0xff0000%7Clabel:%7C"+e.latlng.lat+",+"+e.latlng.lng;r.src="https://maps.googleapis.com/maps/api/staticmap?center="+e.latlng.lat+",+"+e.latlng.lng+"&zoom=16&scale=1&size="+l+"x"+s+"&maptype=roadmap&format=jpg&visual_refresh=true"+i+"&key=AIzaSyD7U9qcVcdpFFnhE9Gj7fJ87TU6SbL0OoE "},loadRestaurantDataAndGenerateStaticGoogleMapsImageLink=function(){var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,a){self.restaurant=a,a?(self.map&&DBHelper.mapMarkerForRestaurant(self.restaurant,self.map),fillRestaurantHTML(),fillBreadcrumb(),loadGoogleMapsPreviewImage(a)):console.error(e)}):error="No restaurant id in URL"},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(e){loadRestaurantDataAndGenerateStaticGoogleMapsImageLink()}):loadRestaurantDataAndGenerateStaticGoogleMapsImageLink(),document.getElementById("gmaps-script-element").src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7U9qcVcdpFFnhE9Gj7fJ87TU6SbL0OoE &libraries=places&callback=initMap";