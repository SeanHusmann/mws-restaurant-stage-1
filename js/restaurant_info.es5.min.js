"use strict";var map,restaurant=void 0;registerServiceWorker=function(){navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js")},registerServiceWorker(),window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementsByClassName("map")[0],{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(e){if(self.restaurant)e(null,self.restaurant);else{var t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,function(t,r){self.restaurant=r,r?(fillRestaurantHTML(),e(null,r)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}},fillRestaurantHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0];document.getElementsByClassName("restaurant-name")[0].innerHTML=e.name;document.getElementsByClassName("restaurant-address")[0].innerHTML=e.address;var t=document.getElementsByClassName("restaurant-img")[0];t.className="restaurant-img";var r=""+["180w","304w","428w","552w","676w","800w"].map(function(t){return"img/"+e.id+"-"+t+".jpg "+t}).join(", ");t.setAttribute("srcset",r),t.setAttribute("sizes","(max-width: 614px) calc(100vw - 2 * 36px), (max-width: 1189px) calc((100vw - 3 * 35px - 2 * 2px) / 2), (max-width: 1399px) calc((100vw - 4 * 35px - 3 * 2px) / 3), (min-width: 1400px) 409px"),t.src="img/"+e.id+"-552w.jpg",t.alt=e.name+" Restaurant";document.getElementsByClassName("restaurant-cuisine")[0].innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.operating_hours:arguments[0],t=document.getElementsByClassName("restaurant-hours")[0];for(var r in e){var a=document.createElement("tr"),n=document.createElement("th");n.innerHTML=r,a.appendChild(n);var i=document.createElement("td");i.innerHTML=e[r],a.appendChild(i),t.appendChild(a)}},fillReviewsHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.reviews:arguments[0],t=document.getElementsByClassName("reviews-container")[0],r=document.createElement("h3");if(r.innerHTML="Reviews",t.appendChild(r),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void t.appendChild(a)}var n=document.getElementsByClassName("reviews-list")[0];e.forEach(function(e){n.appendChild(createReviewHTML(e))}),t.appendChild(n)},createReviewHTML=function(e){var t=document.createElement("li"),r=document.createElement("p");r.innerHTML=e.name,r.className="reviewer-name",t.appendChild(r);var a=document.createElement("p");a.innerHTML=e.date,a.className="review-date",t.appendChild(a);var n=document.createElement("p");n.innerHTML="Rating: "+e.rating,n.className="review-rating",t.appendChild(n);var i=document.createElement("p");return i.innerHTML=e.comments,i.className="review-text",t.appendChild(i),t},fillBreadcrumb=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0],t=document.querySelector(".breadcrumb ol"),r=document.createElement("li");r.innerHTML=e.name,r.setAttribute("aria-current","page"),t.appendChild(r)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null};