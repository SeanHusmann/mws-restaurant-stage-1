"use strict";var map,restaurant=void 0;if(registerServiceWorker=function(){navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js")},registerServiceWorker(),window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementsByClassName("map")[0],{zoom:16,center:t.latlng,scrollwheel:!1}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(e){if(self.restaurant)e(null,self.restaurant);else{var t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,function(t,a){self.restaurant=a,a?(fillRestaurantHTML(),e(null,a)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}},fillRestaurantHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0];document.getElementsByClassName("restaurant-name")[0].innerHTML=e.name;document.getElementsByClassName("restaurant-address")[0].innerHTML=e.address;var t=document.getElementsByClassName("restaurant-img")[0];t.className="restaurant-img";var a=""+["180w","304w","428w","552w","676w","800w"].map(function(t){return"img/"+e.id+"-"+t+".jpg "+t}).join(", ");t.setAttribute("srcset",a),t.setAttribute("sizes","(max-width: 614px) calc(100vw - 2 * 36px), (max-width: 1189px) calc((100vw - 3 * 35px - 2 * 2px) / 2), (max-width: 1399px) calc((100vw - 4 * 35px - 3 * 2px) / 3), (min-width: 1400px) 409px"),t.src="img/"+e.id+"-552w.jpg",t.alt=e.name+" Restaurant";document.getElementsByClassName("restaurant-cuisine")[0].innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.operating_hours:arguments[0],t=document.getElementsByClassName("restaurant-hours")[0];for(var a in e){var r=document.createElement("tr"),n=document.createElement("th");n.innerHTML=a,r.appendChild(n);var l=document.createElement("td");l.innerHTML=e[a],r.appendChild(l),t.appendChild(r)}},fillReviewsHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant.reviews:arguments[0],t=document.getElementsByClassName("reviews-container")[0],a=document.createElement("h3");if(a.innerHTML="Reviews",t.appendChild(a),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var n=document.getElementsByClassName("reviews-list")[0];e.forEach(function(e){n.appendChild(createReviewHTML(e))}),t.appendChild(n)},createReviewHTML=function(e){var t=document.createElement("li"),a=document.createElement("p");a.innerHTML=e.name,a.className="reviewer-name",t.appendChild(a);var r=document.createElement("p");r.innerHTML=e.date,r.className="review-date",t.appendChild(r);var n=document.createElement("p");n.innerHTML="Rating: "+e.rating,n.className="review-rating",t.appendChild(n);var l=document.createElement("p");return l.innerHTML=e.comments,l.className="review-text",t.appendChild(l),t},fillBreadcrumb=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurant:arguments[0],t=document.querySelector(".breadcrumb ol"),a=document.createElement("li");a.innerHTML=e.name,a.setAttribute("aria-current","page"),t.appendChild(a)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},loadGoogleMapsPreviewImage=function(e){var t=document.querySelector(".map-overlay"),a=document.querySelector(".map"),r=document.querySelector(".map-preview"),n=document.querySelector(".map-container");t.onclick=function(){t.style.display="none",t.parentNode.removeChild(t),a.style.display="block",self.map&&google.maps.event.addDomListenerOnce(self.map,"tilesloaded",function(){r.parentNode.removeChild(r),a.style.position="relative"})};window.getComputedStyle(a);var l=Math.trunc(window.innerWidth),i=n.offsetHeight,s="&markers=size:%7Ccolor:0xff0000%7Clabel:%7C"+e.latlng.lat+",+"+e.latlng.lng;r.src="https://maps.googleapis.com/maps/api/staticmap?center="+e.latlng.lat+",+"+e.latlng.lng+"&zoom=16&scale=1&size="+l+"x"+i+"&maptype=roadmap&format=jpg&visual_refresh=true"+s+"&key=AIzaSyD7U9qcVcdpFFnhE9Gj7fJ87TU6SbL0OoE "},"loading"===document.readyState)document.addEventListener("DOMContentLoaded",function(e){var t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,function(e,t){self.restaurant=t,t?(fillRestaurantHTML(),fillBreadcrumb(),loadGoogleMapsPreviewImage(t)):console.error(e)}):error="No restaurant id in URL"});else{var id=getParameterByName("id");id?DBHelper.fetchRestaurantById(id,function(e,t){self.restaurant=t,t?(fillRestaurantHTML(),fillBreadcrumb(),loadGoogleMapsPreviewImage(t)):console.error(e)}):error="No restaurant id in URL"}document.getElementById("gmaps-script-element").src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7U9qcVcdpFFnhE9Gj7fJ87TU6SbL0OoE &libraries=places&callback=initMap";