"use strict";var map,restaurants=void 0,neighborhoods=void 0,cuisines=void 0,restaurantImagesIntersectionObserver=void 0,markers=[];IntersectionObserver&&(restaurantImagesIntersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target;if(e.intersectionRatio>0){var n=""+["180w","304w","428w","552w","676w","800w"].map(function(e){return"img/"+t.getAttribute("restaurant-id")+"-"+e+".jpg "+e}).join(", ");t.setAttribute("srcset",n),t.setAttribute("sizes","(max-width: 499px) calc(100vw - 34px), (max-width: 799px) calc((100vw - 3 * 20px - 2 * 34px) / 2), (max-width: 1023px) calc((100vw - 4 * 20px - 3 * 34px) / 3), (min-width: 1024px) 281px"),t.src="img/"+t.getAttribute("restaurant-id")+"-552w.jpg",restaurantImagesIntersectionObserver.unobserve(t)}})})),registerServiceWorker=function(){navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js")},registerServiceWorker(),fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.neighborhoods:arguments[0],t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.cuisines:arguments[0],t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},window.initMap=function(){self.map=new google.maps.Map(document.getElementsByClassName("map")[0],{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,s=t[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,s,function(e,t){e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[];document.getElementsByClassName("restaurants-list")[0].innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=arguments.length<=0||void 0===arguments[0]?self.restaurants:arguments[0],t=document.getElementsByClassName("restaurants-list")[0];e.forEach(function(e){t.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("li"),n=document.createElement("header");n.className="restaurant-header",t.append(n);var r=document.createElement("img");if(r.className="restaurant-img",r.setAttribute("restaurant-id",e.id),restaurantImagesIntersectionObserver)restaurantImagesIntersectionObserver.observe(r);else{var a=""+["180w","304w","428w","552w","676w","800w"].map(function(t){return"img/"+e.id+"-"+t+".jpg "+t}).join(", ");r.setAttribute("srcset",a),r.setAttribute("sizes","(max-width: 614px) calc(100vw - 2 * 36px), (max-width: 1189px) calc((100vw - 3 * 35px - 2 * 2px) / 2), (max-width: 1399px) calc((100vw - 4 * 35px - 3 * 2px) / 3), (min-width: 1400px) 409px"),r.src="img/"+e.id+"-552w.jpg"}r.alt=e.name+" Restaurant",n.append(r);var s=document.createElement("h2");s.innerHTML=e.name,s.id="restaurant-"+e.id+"-name",n.append(s);var i=document.createElement("p");i.innerHTML=e.neighborhood,t.append(i);var o=document.createElement("p");o.innerHTML=e.address,t.append(o);var c=document.createElement("a");return c.innerHTML="View Details",c.setAttribute("aria-labelledby",s.id),c.href=DBHelper.urlForRestaurant(e),t.append(c),t},addMarkersToMap=function(){(arguments.length<=0||void 0===arguments[0]?self.restaurants:arguments[0]).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})},document.getElementById("neighborhoods-select").onchange=updateRestaurants,document.getElementById("cuisines-select").onchange=updateRestaurants,document.getElementById("gmaps-script-element").src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7U9qcVcdpFFnhE9Gj7fJ87TU6SbL0OoE &libraries=places&callback=initMap","loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()}):(fetchNeighborhoods(),fetchCuisines());